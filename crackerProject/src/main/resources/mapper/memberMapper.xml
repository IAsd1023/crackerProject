<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="memberSQL">
	<insert id="memberWrite" parameterType="member">
		insert into crackermember values(
								seq_crakermember.nextval,
								#{membername},
								#{memberid},
								#{memberpwd},
								#{memberemail1},
								#{memberemail2},
								#{membertel1},
								#{membertel2},
								#{membertel3},
								#{membernickname},
								sysdate)
	</insert>
	<select id="memberIdCheck" parameterType="String" resultType="String">
		select * from crackermember where memberid = #{memberid}
	</select>
	<select id="memberLoginCheck" parameterType="java.util.Map" resultType="member">
		select * from crackermember where memberid = #{memberid} and memberpwd = #{memberpwd}
	</select>
	<select id="memberfindIdcheck" parameterType="java.util.Map" resultType="member">
		select * from crackermember where membername = #{membername} and membertel1 = ${membertel1} and membertel2 = ${membertel2} and membertel3 = ${membertel3}
	</select>
	
	<select id="getMember" parameterType="String" resultType="member">
		select * from crackermember where memberid = #{memberid}
	</select>
	<select id="memberFindPwd" parameterType="java.util.Map" resultType="member">
		select * from crackermember where memberid = #{memberid} and memberemail1 = #{memberemail1} and memberemail2 = #{memberemail2}
	</select>
	<update id="memberPwdUpdate" parameterType="java.util.Map">
		update crackermember set memberpwd = #{authString} where memberid = #{memberid}
	</update>
	<update id="memberUpdate" parameterType="member">
		update crackermember set membername = #{membername} , memberpwd = #{memberpwd} , 
			    memberemail1 = #{memberemail1} , memberemail2 = #{memberemail2} , membertel1 = #{membertel1}, membertel2 = #{membertel2}, membertel3 = #{membertel3}
			    ,membernickname = #{membernickname} where memberid = #{memberid}
	</update>	
	
	<!-- 하루당 사이트 가입자수 -->
  	<select id="loginMember" resultType="int" parameterType="int">
  		select count(*) from crackermember where (TO_DATE(SYSDATE) - TO_DATE(logtime)) &lt; #{i} 
  	</select>
  	
  	<select id="dayLoginMember" resultType="int" parameterType="int">
  		select count(*) from crackermember 
  	</select>
</mapper>